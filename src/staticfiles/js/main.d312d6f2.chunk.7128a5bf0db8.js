(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),a=c(22),s=c.n(a),i=c(3),u=c(8),j=c(5),o=c(11),l=c.n(o),d=c(7),b=c.n(d),O=c(9),p="AUTHORIZATION",m="LOGOUT",h="LOAD_USER_LIST",x="LOAD_USER_ID",f="LOAD_CURRENT_USER",v="LOAD_PROJECT_LIST",g="LOAD_PROJECT_ID",k="LOAD_TASK",y="CREATE_PROJECT",N="DELETE_PROJECT",_="CREATE_TASK",C="DELETE_TASK",w="ADD_COMMENT_TASK",S="EDIT_TASK",T="ADD_TIME_LOG",E="START_LOADING",R="SUCCESS",D="ERROR",A=c(18),L=c(15),P=c(4),U={Authorization:{auth_token:l.a.get("auth_token"),username:"",user_id:""},isAuthenticated:!!l.a.get("isAuthenticated"),UserList:[],UserId:{},CurrentUser:{},ProjectList:[],ProjectDetail:{tasks:[],performers:[]},CurrentTask:{}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(P.a)(Object(P.a)({},e),{},{Authorization:Object(P.a)(Object(P.a)({},e.Authorization),{},{auth_token:t.payload})});case f:return Object(P.a)(Object(P.a)({},e),{},{CurrentUser:t.payload,isAuthenticated:!0});case m:return Object(P.a)(Object(P.a)({},e),{},{isAuthenticated:!1,CurrentUser:{},Authorization:{},ProjectList:[],ProjectDetail:{},CurrentTask:{}});case h:return Object(P.a)(Object(P.a)({},e),{},{UserList:t.payload});case y:return Object(P.a)(Object(P.a)({},e),{},{ProjectList:[].concat(Object(L.a)(e.ProjectList),[t.payload])});case N:return Object(P.a)(Object(P.a)({},e),{},{ProjectList:e.ProjectList.filter((function(e){return e.name!==t.payload}))});case v:return Object(P.a)(Object(P.a)({},e),{},{ProjectList:t.payload});case x:return Object(P.a)(Object(P.a)({},e),{},{UserId:t.payload});case g:return Object(P.a)(Object(P.a)({},e),{},{ProjectDetail:t.payload});case k:return Object(P.a)(Object(P.a)({},e),{},{CurrentTask:t.payload});case _:return Object(P.a)(Object(P.a)({},e),{},{ProjectDetail:Object(P.a)(Object(P.a)({},e.ProjectDetail),{},{tasks:[].concat(Object(L.a)(e.ProjectDetail.tasks),[t.payload])})});case C:return Object(P.a)(Object(P.a)({},e),{},{ProjectDetail:Object(P.a)(Object(P.a)({},e.ProjectDetail),{},{tasks:e.ProjectDetail.tasks.filter((function(e){return e.theme!==t.payload}))})});case S:return Object(P.a)(Object(P.a)({},e),{},{ProjectDetail:Object(P.a)(Object(P.a)({},e.ProjectDetail),{},{tasks:e.ProjectDetail.tasks.map((function(e){return e.id===t.payload.id?t.payload:e}))})});case w:return Object(P.a)(Object(P.a)({},e),{},{CurrentTask:Object(P.a)(Object(P.a)({},e.CurrentTask),{},{comments:e.CurrentTask.comments.concat(t.payload)})});case T:return Object(P.a)(Object(P.a)({},e),{},{CurrentTask:Object(P.a)(Object(P.a)({},e.CurrentTask),{},{timelog:e.CurrentTask.timelog.concat(t.payload)})});default:return e}},I={isLoading:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(P.a)(Object(P.a)({},e),{},{isLoading:!0});case R:case D:return Object(P.a)(Object(P.a)({},e),{},{isLoading:!1});default:return e}},M=Object(A.b)({timetracker:q,loading:F}),J=c(36),K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.c,V=Object(A.d)(M,K(Object(A.a)(J.a))),z=c(37),G=c.n(z).a.create({baseURL:"/api/"});G.interceptors.request.use((function(e){var t=l.a.get("auth_token");return t&&(e.headers.authorization="Token ".concat(t)),e}),(function(e){return Promise.reject(e)}));var H=G,B={auth:{get_user:function(){return H.get("auth/users/me/")},create_account:function(e){return H.post("auth/users/",e)},authorization:function(e){return H.post("auth-token/token/login",e)}},project:{get_projects:function(){return H.get("projects/")},get_project_detail:function(e){return H.get("".concat(e))},create_project:function(e){return H.post("project-create/",e)},delete_project:function(e){return H.delete("project-create/".concat(e))}},task:{get_task:function(e){return H.get("task/".concat(e))},timeLog_create:function(e){return H.post("timelog/",e)},task_create:function(e){return H.post("task-create/",e)},deleteTask:function(e){return H.delete("task-create/".concat(e))},task_edit:function(e,t){return H.patch("task-create/".concat(e,"/"),t)},task_add_comment:function(e,t){return H.patch("task-create/".concat(e,"/"),t)}},user:{get_user_id:function(e){return H.get(e)},get_users_list:function(){return H.get("/auth/users")}}},Z=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.auth.get_user().then((function(e){var t=e.data;return t&&l.a.set("isAuthenticated",!0),t})).catch((function(e){t({type:D}),console.log(e.message,"AUTHORIZATION ERROR")})).finally((function(){t({type:R})}));case 2:return c=e.sent,e.abrupt("return",V.dispatch({type:f,payload:c}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=c(1),Y=function(e){var t=e.children,c=Object(j.g)(),r=Object(i.b)();return Object(n.useEffect)((function(){l.a.get("auth_token")&&r(Z())}),[r]),Object(i.c)((function(e){return e.timetracker})).isAuthenticated?t:Object(X.jsx)(j.a,{to:"/login",state:{from:c}})},Q=(c(71),c(14)),W=c(25),$=(c(72),c(38)),ee=(c(73),function(){return Object(X.jsx)("div",{className:"loader",children:"Loading..."})}),te=function(){var e=Object(i.b)(),t=Object(j.h)(),c=Object(i.c)((function(e){return e.timetracker})).isAuthenticated,n=Object(i.c)((function(e){return e.timetracker.CurrentUser})),r=function(){e(function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.a.remove("auth_token"),l.a.remove("isAuthenticated"),e.abrupt("return",V.dispatch({type:m,payload:""}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t("/login")};return Object(X.jsx)(X.Fragment,{children:c&&n&&n.username?n&&n.username?Object(X.jsxs)("div",{className:"header-wrapper",children:[Object(X.jsx)("img",{className:"header-userpicture",src:n.user_picture,alt:"user_picture"}),Object(X.jsx)("p",{className:"header-text-name",children:n.username}),Object(X.jsx)($.a,{onClick:function(){return r()}})]}):Object(X.jsx)("div",{className:"header-wrapper",children:Object(X.jsx)(ee,{})}):Object(X.jsxs)("div",{className:"header-wrapper",children:[Object(X.jsx)(u.c,{to:"login",children:"Log in"}),Object(X.jsx)("span",{children:" & "}),Object(X.jsx)(u.c,{to:"signup",children:"Sign up"})]})})},ce=function(){return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("div",{className:"sidebar",children:[Object(X.jsxs)("div",{className:"sidebar-icon",children:[Object(X.jsx)(Q.c,{}),Object(X.jsx)("span",{className:"sidebar-text",children:"TimeTracker"})]}),Object(X.jsxs)("nav",{className:"sidebar-nav",children:[Object(X.jsx)("div",{className:"sidebar__item",children:Object(X.jsxs)(u.c,{to:"/",children:[Object(X.jsx)(W.a,{}),Object(X.jsx)("span",{className:"sidebar-nav-text",children:"Dashboard"})]})}),Object(X.jsx)("div",{className:"sidebar__item",children:Object(X.jsxs)(u.c,{to:"/projects",children:[Object(X.jsx)(W.b,{}),Object(X.jsx)("span",{className:"sidebar-nav-text",children:"Projects"})]})})]})]}),Object(X.jsx)("header",{children:Object(X.jsx)(te,{})}),Object(X.jsx)("div",{className:"container",children:Object(X.jsx)("div",{className:"container-wrapper",children:Object(X.jsx)(j.b,{})})})]})},ne=(c(74),function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.user.get_users_list().then((function(e){return e.data})).catch((function(e){console.log(e.message,"LOAD_USER_LIST ERROR")}));case 2:return c=e.sent,e.abrupt("return",V.dispatch({type:h,payload:c}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),re=function(){return Object(X.jsxs)("div",{className:"noauth",children:[Object(X.jsx)(u.b,{to:"/login",children:Object(X.jsx)("button",{className:"btn-blue",children:"Log in"})}),Object(X.jsx)("h3",{children:"or"}),Object(X.jsx)(u.b,{to:"/signup",children:Object(X.jsx)("button",{className:"btn-blue",children:"Sign up"})})]})},ae=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.timetracker.UserList}));Object(n.useEffect)((function(){e(ne())}),[e]);var c=Object(i.c)((function(e){return e.timetracker})).isAuthenticated;return Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{className:"users ",children:c&&t?t.map((function(e){return Object(X.jsx)(u.b,{to:"users/".concat(e.username),children:Object(X.jsxs)("div",{className:"user-card",children:[Object(X.jsx)("img",{className:"user-picture",src:e.user_picture,alt:"userpicture"}),Object(X.jsx)("p",{className:"users-username-text",children:e.username}),Object(X.jsx)("span",{children:"-"}),Object(X.jsx)("p",{children:e.position})]})},e.id)})):Object(X.jsx)(re,{})})})},se=function(){return Object(X.jsx)("div",{className:"dashboard",children:Object(X.jsx)("div",{className:"dashboard-wrapper",children:Object(X.jsx)(ae,{})})})},ie=c(39),ue=(c(75),function(){return Object(X.jsxs)("div",{className:"lds-spinner",children:[Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{}),Object(X.jsx)("div",{})]})}),je=c(17),oe=function(e){var t=e.projectList;return Object(X.jsx)("div",{className:"projects-wrapper",children:0!==t.length?t.map((function(e){var t=e.id,c=e.name;return Object(X.jsx)(u.b,{to:c,children:Object(X.jsxs)("div",{className:"project-card",children:[Object(X.jsx)(Q.d,{}),Object(X.jsx)("p",{className:"project-name",children:c})]})},t)})):Object(X.jsxs)("span",{className:"no-project",children:["You are not assigned to any of the projects ...",Object(X.jsx)(je.b,{})]})})},le=(c(76),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.timetracker.ProjectList})),c=Object(i.c)((function(e){return e.loading.isLoading})),r=Object(i.c)((function(e){return e.timetracker.CurrentUser})).is_superuser,a=Object(n.useCallback)((function(){return e(function(){var e=Object(O.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:E}),e.next=3,B.project.get_projects().then((function(e){return e.data})).catch((function(e){t({type:D}),console.log(e.message,"LOAD_PROJECT_LIST ERROR")})).finally((function(){t({type:R})}));case 3:return c=e.sent,e.abrupt("return",V.dispatch({type:v,payload:c}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);return Object(n.useEffect)((function(){a()}),[e,a]),Object(X.jsx)(X.Fragment,{children:c?Object(X.jsx)(ue,{}):Object(X.jsxs)("div",{className:"projects-container",children:[Object(X.jsx)(oe,{projectList:t}),r&&r?Object(X.jsx)(u.b,{to:"/project-create",children:Object(X.jsxs)("button",{className:"btn-blue",children:[Object(X.jsx)(ie.a,{}),"New project"]})}):Object(X.jsx)("span",{})]})})}),de=c(6),be=function(){var e=Object(i.b)(),t=Object(j.h)(),c=Object(i.c)((function(e){return e.timetracker.UserList})),r=Object(i.c)((function(e){return e.loading.isLoading})),a=Object(n.useState)(""),s=Object(de.a)(a,2),u=s[0],o=s[1],l=Object(n.useState)(""),d=Object(de.a)(l,2),p=d[0],m=d[1],h=Object(n.useState)(0!==c.length?c:[]),x=Object(de.a)(h,2),f=x[0],v=x[1];if(Object(n.useEffect)((function(){e(ne())}),[e]),r)return Object(X.jsx)(ue,{});var g=f.filter((function(e){return e.checked})),k=Object(L.a)(c);return Object(X.jsx)("div",{className:"project-create",children:Object(X.jsxs)("form",{className:"login-container",onSubmit:function(c){c.preventDefault();var n,r=[];g.map((function(e){r.push(e.id)}));e((n={name:u,description:p,performers:r},function(){var e=Object(O.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.project.create_project(n).then((function(e){return e.data})).catch((function(e){console.log(e.message,"CREATE_PROJECT ERROR")}));case 2:return c=e.sent,e.abrupt("return",V.dispatch({type:y,payload:c}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),v([]),t("/projects")},children:[Object(X.jsx)("input",{onChange:function(e){return o(e.target.value)},type:"text",placeholder:"Name project",autoComplete:"name",name:"name",required:!0}),Object(X.jsx)("input",{onChange:function(e){return m(e.target.value)},type:"text",placeholder:"Description",name:"description",required:!0}),Object(X.jsx)("div",{className:"user-checkbox-wrapper",children:0!==c.length?c.map((function(e,t){return Object(X.jsxs)("div",{className:"user-checkbox",children:[Object(X.jsx)("input",{type:"checkbox",onChange:function(e){k[t].checked=e.target.checked,v(k)},checked:e.checked,id:e.id,className:"styled-checkbox"}),Object(X.jsxs)("label",{htmlFor:e.id,children:[" ",Object(X.jsx)("img",{className:"user-picture-small",src:e.user_picture,alt:"userpicture"}),Object(X.jsx)("p",{children:e.username})]})]},e.id)})):Object(X.jsx)(ue,{})}),Object(X.jsxs)("div",{className:"user-checkbox-added",children:[Object(X.jsx)("h3",{children:"Add users in project:"}),0!==g.isLoading?g.map((function(e,t){return Object(X.jsx)("div",{children:Object(X.jsx)("p",{className:"add-user",children:e.username})},e.id)})):Object(X.jsx)(ue,{})]}),Object(X.jsx)("button",{className:"btn-save",type:"submit",children:"Create project"})]})})},Oe=function(){var e=Object(i.b)(),t=Object(j.g)(),c=Object(i.c)((function(e){return e.timetracker.UserId}));return Object(n.useEffect)((function(){e(function(e){return function(){var t=Object(O.a)(b.a.mark((function t(c){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.user.get_user_id(e).then((function(e){return e.data})).catch((function(e){c({type:D}),console.log(e.message,"LOAD_USER_ID ERROR")}));case 2:return n=t.sent,t.abrupt("return",V.dispatch({type:x,payload:n}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t.pathname))}),[e,t]),Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("div",{className:"userId gd",children:[Object(X.jsx)("img",{className:"user-picture",src:c.user_picture,alt:"userpicture"}),Object(X.jsx)("p",{children:c.username}),Object(X.jsx)("p",{children:c.position}),Object(X.jsx)("p",{children:c.email}),Object(X.jsx)("p",{children:c.birth_date}),Object(X.jsx)(u.b,{to:"/",children:Object(X.jsx)("button",{className:"btn-blue",children:"Back"})})]})})},pe=function(){var e=Object(i.b)(),t=Object(j.h)(),c=Object(j.i)().name,r=Object(i.c)((function(e){return e.timetracker.ProjectDetail})),a=r.id,s=r.performers,u=s[0].id,o=Object(i.c)((function(e){return e.timetracker.CurrentUser.id})),l=Object(n.useState)(""),d=Object(de.a)(l,2),p=d[0],m=d[1],h=Object(n.useState)(""),x=Object(de.a)(h,2),f=x[0],v=x[1],g=Object(n.useState)(""),k=Object(de.a)(g,2),y=k[0],N=k[1],C=Object(n.useState)(""),w=Object(de.a)(C,2),S=w[0],T=w[1],E=Object(n.useState)("feature"),R=Object(de.a)(E,2),D=R[0],A=R[1],L=Object(n.useState)("normal"),P=Object(de.a)(L,2),U=P[0],q=P[1],I=Object(n.useState)("1"),F=Object(de.a)(I,2),M=F[0],J=F[1],K=Object(n.useState)(u),z=Object(de.a)(K,2),G=z[0],H=z[1];return Object(X.jsx)("div",{className:"container-login select",children:Object(X.jsxs)("div",{className:"",children:[Object(X.jsxs)("h1",{children:["Task in project: ",c]}),Object(X.jsxs)("form",{className:"login-container",onSubmit:function(c){var n;c.preventDefault(),e((n={theme:p,description:f,date_start:y,date_end:S,task_type:D,task_priority:U,estimated_time:M,performer:G,author:o,project:a},function(){var e=Object(O.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,B.task.task_create(n).then((function(e){return e.data})).catch((function(e){console.log(e.message,"CREATE_TASK ERROR")}));case 3:return c=e.sent,e.abrupt("return",V.dispatch({type:_,payload:c}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t(-1)},children:[Object(X.jsx)("input",{onChange:function(e){return m(e.target.value)},type:"text",placeholder:"theme",autoComplete:"username",name:"theme",max:"2",min:"1",required:!0}),Object(X.jsx)("input",{onChange:function(e){return v(e.target.value)},type:"textarea",placeholder:"description",name:"description",required:!0}),Object(X.jsx)("input",{onChange:function(e){return N(e.target.value)},type:"datetime-local",placeholder:"date start",name:"date_start",required:!0}),Object(X.jsx)("input",{onChange:function(e){return T(e.target.value)},type:"datetime-local",placeholder:"date end",name:"date_end",required:!0}),Object(X.jsx)("div",{className:"select",children:Object(X.jsxs)("select",{id:"standard-select",required:!0,onChange:function(e){return A(e.target.value)},children:[Object(X.jsx)("option",{value:"feature",children:"feature"}),Object(X.jsx)("option",{value:"bug",children:"bug"})]})}),Object(X.jsx)("div",{className:"select",children:Object(X.jsxs)("select",{id:"standard-select",required:!0,defaultValue:"normal",onChange:function(e){return q(e.target.value)},children:[Object(X.jsx)("option",{value:"normal",children:"normal"}),Object(X.jsx)("option",{value:"high",children:"high"}),Object(X.jsx)("option",{value:"urgent",children:"urgent"})]})}),Object(X.jsx)("div",{className:"select",children:Object(X.jsx)("select",{id:"standard-select",required:!0,onChange:function(e){return H(e.target.value)},children:s.map((function(e){return Object(X.jsx)("option",{value:e.id,defaultValue:e.id,children:e.username},e.id)}))})}),Object(X.jsx)("input",{onChange:function(e){return J(e.target.value)},type:"number",defaultValue:1,name:"estimated_time",min:"0",required:!0}),Object(X.jsx)("button",{className:"btn-save",type:"submit",children:"Create task"})]})]})})},me=function(e){var t=e.getFullYear(),c=e.getMonth(),n=e.getDate(),r=e.getHours(),a=e.getMinutes(),s="",i="",u="";switch(a){case 0:u="00";break;case 1:u="01";break;case 2:u="02";break;case 3:u="03";break;case 4:u="04";break;case 5:u="05";break;case 6:u="06";break;case 7:u="07";break;case 8:u="08";break;case 9:u="09";break;default:u=a}switch(r){case 0:i="00";break;case 1:i="01";break;case 2:i="02";break;case 3:i="03";break;case 4:i="04";break;case 5:i="05";break;case 6:i="06";break;case 7:i="07";break;case 8:i="08";break;case 9:i="09";break;default:i=r}switch(c){case 0:s="01";break;case 1:s="02";break;case 2:s="03";break;case 3:s="04";break;case 4:s="05";break;case 5:s="06";break;case 6:s="07";break;case 7:s="08";break;case 8:s="09";break;case 9:s="10";break;case 10:s="11";break;case 11:s="12";break;default:s=c}return n+"."+s+"."+t+" "+i+":"+u},he=c(40),xe=c(82),fe=function(){var e=Object(i.b)(),t=Object(n.useState)(""),c=Object(de.a)(t,2),r=c[0],a=c[1],s=Object(j.i)().theme,u=Object(i.c)((function(e){return e.timetracker.CurrentTask})).comments,o=Object(i.c)((function(e){return e.timetracker.CurrentUser})),l=o.username,d=o.user_picture,p=new Date;return Object(X.jsxs)("div",{className:"",children:[Object(X.jsx)("div",{className:"textarea-wrapper",children:Object(X.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c={theme:s,comments:[{text:r,auhtor:l,user_picture:d,date:me(p)}].concat(Object(L.a)(u))};a(""),e(function(e,t){return function(){var c=Object(O.a)(b.a.mark((function c(n){var r;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,B.task.task_add_comment(e,t).then((function(e){return e.data})).catch((function(e){console.log(e.message,"ADD_COMMENT_TASK")}));case 2:return r=c.sent,c.abrupt("return",V.dispatch({type:w,payload:r.comments[0]}));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(s,c))},children:[Object(X.jsx)("button",{className:"btn-blue",type:"submit",children:Object(X.jsx)(he.a,{})}),Object(X.jsx)("input",{id:"input-comment",type:"textarea",className:"input-comment",value:r,onChange:function(e){return a(e.target.value)},placeholder:"comment",name:"comment",required:!0})]})}),u&&0!==u.length?u.map((function(e){return Object(X.jsx)("div",{className:"comments-card",children:Object(X.jsxs)("div",{className:"comments-card-wrapper",children:[Object(X.jsx)("div",{className:"comments-card-picture",children:Object(X.jsx)("img",{src:e.user_picture,alt:"user_picture"})}),Object(X.jsxs)("div",{children:[Object(X.jsx)("div",{children:Object(X.jsxs)("p",{className:"author-comment",children:[e.auhtor," ",Object(X.jsxs)("span",{className:"task-date-text",children:["(",e.date,")"]})]})}),Object(X.jsx)("div",{className:"comment-text",children:Object(X.jsx)("p",{children:e.text})})]})]})},Object(xe.a)())})):Object(X.jsx)("p",{children:"no comments"})]})},ve=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.timetracker.CurrentTask})),c=t.id,r=t.timelog,a=Object(i.c)((function(e){return e.timetracker.CurrentUser})),s=a.username,u=a.user_picture,j=Object(n.useState)(""),o=Object(de.a)(j,2),l=o[0],d=o[1],p=Object(n.useState)("1"),m=Object(de.a)(p,2),h=m[0],x=m[1],f=new Date;return Object(X.jsxs)("div",{className:"timelog-wrapper",children:[Object(X.jsx)("div",{className:"textarea-wrapper ",children:Object(X.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={spent_time:h,task:c,comment:{text:l,date:me(f),auhtor:s,user_picture:u}};x("1"),d(""),e(function(e){return function(){var t=Object(O.a)(b.a.mark((function t(c){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.task.timeLog_create(e).then((function(e){return e.data})).catch((function(e){console.log(e.message,"ADD_TIME_LOG ERROR")}));case 2:return n=t.sent,t.abrupt("return",V.dispatch({type:T,payload:n}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))},className:"timelog-form",children:[Object(X.jsx)("button",{className:"btn-blue",type:"submit",children:Object(X.jsx)(Q.b,{})}),Object(X.jsx)("input",{id:"input-comment",type:"number",className:"input-comment input-timelog-time",min:1,max:999,value:h,onChange:function(e){return x(e.target.value)},name:"comment",required:!0}),Object(X.jsx)("input",{type:"text",className:"input-comment",value:l,onChange:function(e){return d(e.target.value)},placeholder:"what's done ?",name:"comment",required:!0})]})}),Object(X.jsx)("div",{className:"comments-card",children:r&&0!==r.length?r.map((function(e){return Object(X.jsx)("div",{className:"",children:Object(X.jsx)("div",{className:"comments-card-wrapper",children:Object(X.jsxs)("div",{className:"",children:[Object(X.jsx)("div",{className:"comments-card-picture",children:Object(X.jsx)("img",{src:e.comment.user_picture,alt:"user_picture"})}),Object(X.jsxs)("div",{className:"",children:[Object(X.jsxs)("div",{className:"author-comment",children:[Object(X.jsxs)("span",{children:[e.comment.auhtor," "]}),Object(X.jsxs)("span",{className:"task-date-text",children:["(",e.comment.date,")"]})]}),Object(X.jsx)("div",{className:"comment-text",children:Object(X.jsx)("p",{children:e.comment.text})})]}),Object(X.jsx)("div",{className:"timelog-hours",children:Object(X.jsxs)("p",{children:[e.spent_time," hours"]})})]})})},e.id)})):Object(X.jsx)("p",{children:"no timelog"})})]})},ge=function(e){var t=e.task.timelog,c=t;return Object(X.jsx)("div",{children:Object(X.jsx)("div",{children:Object(X.jsxs)("div",{className:"spent-time",children:[c?Object(X.jsxs)("span",{children:["Spent time:"," ",t.map((function(e){return e.spent_time})).reduce((function(e,t){return e+t}),0)," ","hours"]}):Object(X.jsx)("span",{children:"0"})," "]})})})},ke=(c(77),c(26)),ye=function(e){var t=e.task,c=Object(j.h)(),n=Object(i.b)(),r=t.theme,a=function(){n(function(e){return function(){var t=Object(O.a)(b.a.mark((function t(c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.task.deleteTask(e);case 2:return t.abrupt("return",V.dispatch({type:C,payload:e}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r)),c(-1,{replace:!0})};return Object(X.jsx)("div",{children:Object(X.jsx)(je.a,{className:"project-trash",onClick:function(){return a()}})})},Ne=function(){var e=Object(j.h)(),t=Object(i.b)(),c=Object(n.useState)({readOnly:!0}),r=Object(de.a)(c,2),a=r[0],s=r[1],u=Object(i.c)((function(e){return e.timetracker.CurrentTask})),o=Object(i.c)((function(e){return e.timetracker.ProjectDetail})),l=o.id,d=o.performers,p=Object(i.c)((function(e){return e.timetracker.CurrentTask})).performer,m=Object(j.i)().theme,h=Object(i.c)((function(e){return e.loading.isLoading})),x=Object(n.useState)(""),f=Object(de.a)(x,2),v=f[0],g=f[1],y=Object(n.useState)(""),N=Object(de.a)(y,2),_=N[0],C=N[1],w=Object(n.useState)(""),T=Object(de.a)(w,2),A=T[0],L=T[1],P=Object(n.useState)(""),U=Object(de.a)(P,2),q=U[0],I=U[1],F=Object(n.useState)(""),M=Object(de.a)(F,2),J=M[0],K=M[1],z=Object(n.useState)(""),G=Object(de.a)(z,2),H=G[0],Z=G[1],Y=Object(n.useState)(""),Q=Object(de.a)(Y,2),W=Q[0],$=Q[1],ee=Object(n.useState)(""),te=Object(de.a)(ee,2),ce=te[0],ne=te[1];function re(e){return me(new Date(e))}Object(n.useEffect)((function(){t(function(e){return function(){var t=Object(O.a)(b.a.mark((function t(c){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:E}),t.next=3,B.task.get_task(e).then((function(e){return e.data})).catch((function(e){c({type:D}),console.log(e.message,"LOAD_TASK ERROR")})).finally((function(){c({type:R})}));case 3:return n=t.sent,t.abrupt("return",V.dispatch({type:k,payload:n}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(m))}),[t,m]);var ae=function(){s((function(e){return{readOnly:!e.readOnly}}))},se="normal";switch(u&&0!==u.length?u.task_priority:se){case"normal":se="task-normal";break;case"high":se="task-high";break;case"urgent":se="task-urgent"}return Object(X.jsx)(X.Fragment,{children:h?Object(X.jsx)(ue,{}):Object(X.jsxs)("div",{className:"".concat(u?se:""," task-edit-wrapper"),children:[Object(X.jsxs)("div",{className:"task-header",children:[Object(X.jsxs)("h1",{className:a.readOnly?"":"blink",children:["Task"," ",Object(X.jsx)(ke.b,{onClick:function(){return ae()},className:a.readOnly?"''":"svg-edit"}),Object(X.jsx)(ye,{task:u})]}),Object(X.jsx)(ge,{task:u}),Object(X.jsx)("div",{children:Object(X.jsx)(ke.a,{onClick:function(){return e(-1)}})})]}),Object(X.jsxs)("div",{className:"task-content-wrapper",children:[Object(X.jsxs)("form",{className:"form-task-edit comments-wrapper",onSubmit:function(c){c.preventDefault();var n={theme:v,description:_,date_start:A,date_end:q,task_type:J,task_priority:H,estimated_time:W,performer:ce,project:l};!function(e){for(var t in e)null!==e[t]&&void 0!==e[t]&&""!==e[t]||delete e[t]}(n),t(function(e,t){return function(){var c=Object(O.a)(b.a.mark((function c(n){var r;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,B.task.task_edit(e,t).then((function(e){return e.data})).catch((function(e){console.log(e.message,"EDIT_TASK")}));case 2:return r=c.sent,c.abrupt("return",V.dispatch({type:S,payload:r}));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(m,n)),e(-1)},children:[Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"theme",children:"Theme:"}),Object(X.jsx)("input",{onChange:function(e){return g(e.target.value)},className:a.readOnly?"''":"input-effect",readOnly:a.readOnly,id:"theme",type:"text",defaultValue:u.theme,name:"theme",required:!0})]}),Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"description",children:"Description:"}),Object(X.jsx)("textarea",{onChange:function(e){return C(e.target.value)},className:a.readOnly?"''":"input-effect",readOnly:a.readOnly,type:"textarea",id:"description",name:"description",defaultValue:u.description,required:!0})]}),Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"date_start",children:"Date start:"}),Object(X.jsx)("p",{className:a.readOnly?"date":"none",children:re(u.date_start)}),Object(X.jsx)("input",{onChange:function(e){return L(e.target.value)},className:a.readOnly?"none":"date, input-effect",readOnly:a.readOnly,id:"date_start",type:"datetime-local",name:"date_start",required:!0})]}),Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"date_end",children:"Date end:"}),Object(X.jsx)("p",{className:a.readOnly?"date":"none",children:re(u.date_end)}),Object(X.jsx)("input",{onChange:function(e){return I(e.target.value)},className:a.readOnly?"none":"date, input-effect",readOnly:a.readOnly,id:"date_end",type:"datetime-local",name:"date_end",required:!0})]}),Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"standard-select",children:"Task type:"}),Object(X.jsxs)("select",{disabled:a.readOnly,id:"standard-select",required:!0,defaultValue:u.task_type,onChange:function(e){return K(e.target.value)},children:[Object(X.jsx)("option",{value:"feature",children:"feature"}),Object(X.jsx)("option",{value:"bug",children:"bug"})]})]}),Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"standard-select-1",children:"Task priority:"}),Object(X.jsxs)("select",{disabled:a.readOnly,id:"standard-select-1",required:!0,defaultValue:u.task_priority,onChange:function(e){return Z(e.target.value)},children:[Object(X.jsx)("option",{value:"normal",children:"normal"}),Object(X.jsx)("option",{value:"high",children:"high"}),Object(X.jsx)("option",{value:"urgent",children:"urgent"})]})]}),Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"standard-select-1",children:"Performer:"}),Object(X.jsx)("p",{className:a.readOnly?"date":"none",children:p&&0!==p.username.length?p.username:""}),Object(X.jsx)("select",{className:a.readOnly?"none":"date, input-effect",disabled:a.readOnly,id:"standard-select",required:!0,onChange:function(e){return ne(e.target.value)},children:d.map((function(e){return Object(X.jsx)("option",{value:e.id,children:e.username},e.id)}))})]}),Object(X.jsxs)("div",{className:"select",children:[Object(X.jsx)("label",{htmlFor:"standard-select",children:"Estimated time:"}),Object(X.jsx)("input",{readOnly:a.readOnly,onChange:function(e){return $(e.target.value)},className:a.readOnly?"''":"input-effect",type:"number",defaultValue:1,name:"estimated_time",min:"0",required:!0})]}),Object(X.jsx)("button",{onClick:function(){return ae()},className:a.readOnly?"none":"btn-edit",type:"submit",children:"Save edit"})]}),Object(X.jsx)("div",{className:"comments-wrapper comments",children:Object(X.jsx)(fe,{})})]}),Object(X.jsx)("div",{className:"comments-wrapper",children:Object(X.jsx)(ve,{})})]})})},_e=(c(78),function(){var e=Object(i.c)((function(e){return e.timetracker.CurrentUser})).username;return Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{className:"container-login",children:Object(X.jsxs)("div",{className:"form-box",children:[Object(X.jsxs)("p",{children:["Hello, ",e," !"]}),Object(X.jsx)(u.b,{to:"/",children:"Start"})]})})})}),Ce=function(){var e,t,c=Object(j.h)(),r=Object(i.b)(),a=(null===(e=Object(j.g)().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/",s=Object(i.c)((function(e){return e.timetracker.CurrentUser})).username,u=Object(n.useState)(""),o=Object(de.a)(u,2),d=o[0],m=o[1],h=Object(n.useState)(""),x=Object(de.a)(h,2),f=x[0],v=x[1];return Object(n.useEffect)((function(){l.a.get("auth_token")&&r(Z())}),[r]),s&&0!==s.length?Object(X.jsx)(_e,{}):Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{className:"container-login",children:Object(X.jsx)("div",{className:"form-box",children:Object(X.jsxs)("form",{className:"login-container",onSubmit:function(e){e.preventDefault();var t,n={username:d,password:f};m(""),v(""),r((t=n,function(){var e=Object(O.a)(b.a.mark((function e(c){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.auth.authorization(t).then((function(e){return c({type:E}),l.a.set("auth_token",e.data.auth_token),e.data.auth_token})).catch((function(e){c({type:D}),console.log(e.message,"AUTHORIZATION ERROR")})).finally((function(){c({type:R})}));case 2:return n=e.sent,c(Z()),e.abrupt("return",V.dispatch({type:p,payload:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c(a,{replace:!0})},children:[Object(X.jsx)("input",{onChange:function(e){return m(e.target.value)},type:"text",placeholder:"Name",autoComplete:"username",name:"username",required:!0}),Object(X.jsx)("input",{onChange:function(e){return v(e.target.value)},type:"password",placeholder:"Password",autoComplete:"current-password"}),Object(X.jsx)("button",{className:"btn-save",type:"submit",children:"Log in"})]})})})})},we=function(){var e=Object(i.b)(),t=Object(n.useState)(""),c=Object(de.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),u=Object(de.a)(s,2),o=u[0],l=u[1],d=Object(n.useState)(""),p=Object(de.a)(d,2),m=p[0],h=p[1],x=Object(n.useState)(""),f=Object(de.a)(x,2),v=f[0],g=f[1],k=Object(n.useState)(""),y=Object(de.a)(k,2),N=y[0],_=y[1],C=Object(n.useState)(""),w=Object(de.a)(C,2),S=w[0],T=w[1],E=Object(j.h)();return Object(X.jsx)("div",{className:"container-login",children:Object(X.jsx)("div",{className:"form-box",children:Object(X.jsxs)("form",{className:"login-container",onSubmit:function(t){t.preventDefault();var c,n={username:r,position:o,email:v,birth_date:m,password:N,passwordConf:S};console.log(n),e((c=n,function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c),e.next=3,B.auth.create_account(c).then((function(e){e.data})).catch((function(e){t({type:D}),console.log(e.message,"CREATE_USER ERROR")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),E("/login")},children:[Object(X.jsx)("input",{onChange:function(e){return a(e.target.value)},type:"text",placeholder:"Name",autoComplete:"username",name:"username",required:!0}),Object(X.jsx)("input",{onChange:function(e){return l(e.target.value)},type:"text",placeholder:"Position",name:"position",required:!0}),Object(X.jsx)("input",{onChange:function(e){return h(e.target.value)},type:"date",placeholder:"Birth date",name:"birth_date",required:!0}),Object(X.jsx)("input",{onChange:function(e){return g(e.target.value)},type:"email",placeholder:"Email",name:"email",autoComplete:"email",required:!0}),Object(X.jsx)("input",{onChange:function(e){return _(e.target.value)},name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",required:!0}),Object(X.jsx)("input",{onChange:function(e){return T(e.target.value)},type:"password",placeholder:"Confirm password",name:"password",autoComplete:"current-password",required:!0}),Object(X.jsx)("button",{className:"btn-save",type:"submit",children:"Sign up"})]})})})},Se=function(){return Object(X.jsxs)("section",{className:"page_404",children:[Object(X.jsx)("h1",{className:"error",children:"404"}),Object(X.jsxs)(u.b,{to:"/",children:[Object(X.jsx)("span",{className:"link_404",children:"Go to the home page"})," "]})]})},Te=function(e){var t=e.user_picture,c=e.username,n=e.position;return Object(X.jsxs)("div",{className:"user-performers",children:[Object(X.jsx)("img",{className:"user-picture",src:t,alt:"userpicture"}),Object(X.jsx)("p",{className:"users-username-text",children:c}),Object(X.jsx)("span",{children:"-"}),Object(X.jsx)("p",{children:n})]})},Ee=function(e){var t=e.project,c=Object(j.h)(),n=Object(i.b)(),r=t.name,a=function(){n(function(e){return function(){var t=Object(O.a)(b.a.mark((function t(c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.project.delete_project(e);case 2:return t.abrupt("return",V.dispatch({type:N,payload:e}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r)),c("/projects",{replace:!0})};return Object(X.jsx)("div",{children:Object(X.jsx)(je.a,{className:"project-trash",onClick:function(){return a()}})})},Re=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.timetracker.ProjectDetail})),c=Object(j.g)(),r=Object(i.c)((function(e){return e.timetracker.CurrentUser})).is_superuser,a=Object(n.useCallback)((function(){return e(function(e){return function(){var t=Object(O.a)(b.a.mark((function t(c){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:E}),t.next=3,B.project.get_project_detail(e).then((function(e){return e.data})).catch((function(e){c({type:D}),console.log(e.message,"LOAD_PROJECT_ID ERROR")})).finally((function(){c({type:R})}));case 3:return n=t.sent,t.abrupt("return",V.dispatch({type:g,payload:n}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c.pathname))}),[e,c]);Object(n.useEffect)((function(){a()}),[e,a]);var s=Object(i.c)((function(e){return e.loading.isLoading}));return Object(X.jsx)(X.Fragment,{children:s?Object(X.jsx)(ue,{}):Object(X.jsxs)("div",{className:"project",children:[Object(X.jsxs)("div",{className:"projectId-title",children:[Object(X.jsxs)("h1",{children:[" ",Object(X.jsx)(Q.d,{})," ",t.name," "]}),r&&r?Object(X.jsx)(Ee,{project:t}):Object(X.jsx)("span",{})]}),Object(X.jsx)("p",{className:"project-description",children:t.description}),Object(X.jsxs)("div",{className:"project-performers",children:[Object(X.jsxs)("div",{className:"project-item",children:[Object(X.jsx)("h3",{children:"Performers:"}),t&&0!==t.length?t.performers.map((function(e){var t=e.username,c=e.id,n=e.user_picture,r=e.position;return Object(X.jsx)(u.b,{to:"/users/".concat(t),children:Object(X.jsx)(Te,{user_picture:n,username:t,position:r})},c)})):Object(X.jsx)("span",{})]}),Object(X.jsxs)("div",{className:"project-item",children:[Object(X.jsx)("h3",{children:"Task"}),t&&0!==t.tasks.length?t.tasks.map((function(e){return Object(X.jsx)(u.b,{to:"/task/".concat(e.theme),children:Object(X.jsxs)("div",{className:"user-performers",children:[Object(X.jsx)(Q.a,{}),Object(X.jsx)("p",{children:e.theme})]})},e.id)})):Object(X.jsx)("span",{children:"no tasks"})]})]}),Object(X.jsxs)("div",{className:"btn-container",children:[Object(X.jsx)(u.b,{to:"/projects",children:Object(X.jsx)("button",{className:"btn-blue",children:"Back"})}),Object(X.jsx)(u.b,{to:"task-create",children:Object(X.jsx)("button",{className:"btn-blue",children:"Create task"})})]})]})})},De=function(){return Object(X.jsxs)(X.Fragment,{children:[" ",Object(X.jsx)(j.e,{children:Object(X.jsxs)(j.c,{path:"/",element:Object(X.jsx)(ce,{}),children:[Object(X.jsx)(j.c,{path:"login",element:Object(X.jsx)(Ce,{})}),Object(X.jsx)(j.c,{path:"signup",element:Object(X.jsx)(we,{})}),Object(X.jsx)(j.c,{path:"*",element:Object(X.jsx)(Se,{})}),Object(X.jsx)(j.c,{index:!0,element:Object(X.jsx)(Y,{children:Object(X.jsx)(se,{})})}),Object(X.jsx)(j.c,{path:"users",element:Object(X.jsx)(Y,{children:Object(X.jsx)(ae,{})})}),Object(X.jsx)(j.c,{path:"/users/:username",element:Object(X.jsx)(Oe,{})}),Object(X.jsx)(j.c,{path:"projects",element:Object(X.jsx)(Y,{children:Object(X.jsx)(le,{})})}),Object(X.jsx)(j.c,{path:"projects/:name",element:Object(X.jsx)(Y,{children:Object(X.jsx)(Re,{})})}),Object(X.jsx)(j.c,{path:"projects/:name/task-create",element:Object(X.jsx)(Y,{children:Object(X.jsx)(pe,{})})}),Object(X.jsx)(j.c,{path:"project-create",element:Object(X.jsx)(Y,{children:Object(X.jsx)(be,{})})}),Object(X.jsx)(j.c,{path:"task/:theme",element:Object(X.jsx)(Y,{children:Object(X.jsx)(Ne,{})})})]})})]})};c(79);s.a.render(Object(X.jsx)(r.a.StrictMode,{children:Object(X.jsx)(u.a,{children:Object(X.jsx)(i.a,{store:V,children:Object(X.jsx)(De,{})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.d312d6f2.chunk.js.map